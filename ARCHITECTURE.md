# ARQUITETURA COMPLETA DO AGENT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚                      ğŸ–¥ï¸  TERMINAL / CLI                             â”‚
â”‚                      python main.py "pergunta"                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      main.py (Entry Point)        â”‚
         â”‚                                   â”‚
         â”‚  - Inicializa Agent              â”‚
         â”‚  - Carrega documentos (RAG)      â”‚
         â”‚  - Gerencia CLI interativa       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Agent (agent.py)        â”‚
         â”‚                           â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ chat(user_query)    â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚        â”‚                  â”‚
         â”‚    [IteraÃ§Ã£o 1..N]        â”‚
         â”‚    - Build prompt         â”‚
         â”‚    - Call LLM             â”‚
         â”‚    - Parse tool calls     â”‚
         â”‚    - Execute tools        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                   â”‚                  â”‚
         â–¼                                   â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RAG Module  â”‚              â”‚ LLM (Ollama)   â”‚      â”‚ Tools Exec  â”‚
    â”‚ (rag.py)    â”‚              â”‚                â”‚      â”‚ (tools.py)  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                                      â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
          â”‚                             â”‚                       â”‚
      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚Documentâ”‚              â”‚  Embeddings   â”‚          â”‚Tools Class â”‚
      â”‚Loader  â”‚              â”‚               â”‚          â”‚            â”‚
      â”‚        â”‚              â”‚ nomic-embed   â”‚          â”‚ - API      â”‚
      â”‚- PDF  â”‚              â”‚ text (local)  â”‚          â”‚ - File     â”‚
      â”‚- TXT  â”‚              â”‚               â”‚          â”‚ - JSON     â”‚
      â”‚- MD   â”‚              â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚ - Debug    â”‚
      â”‚- DOCX â”‚                  â”‚      â”‚               â”‚ - System   â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                  â”‚      â”‚               â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
          â”‚          â”‚                           â”‚           â”‚
      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚Chunking  â”‚   â”‚   â”‚ Vector Store     â”‚    â”‚      â”‚Tool Resultâ”‚
      â”‚(splitter)â”‚   â”‚   â”‚ (FAISS)          â”‚    â”‚      â”‚           â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚                  â”‚    â”‚      â”‚- success  â”‚
          â”‚          â”‚   â”‚ similarity_      â”‚    â”‚      â”‚- data     â”‚
      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚ search()         â”‚    â”‚      â”‚- error    â”‚
      â”‚Vector    â”‚â—„â”€â”€â”¤   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚Store     â”‚   â”‚          â”‚                â”‚           â”‚
      â”‚(FAISS)   â”‚   â”‚          â–¼                â”‚           â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚           â”‚
          â”‚          â”‚    â”‚Retrieved Docsâ”‚      â”‚           â”‚
          â”‚          â”‚    â”‚(context)     â”‚      â”‚           â”‚
          â”‚          â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚           â”‚
          â”‚          â”‚                          â”‚           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Prompt Building     â”‚
                  â”‚                      â”‚
                  â”‚  - System prompt     â”‚
                  â”‚  - Tools description â”‚
                  â”‚  - RAG context       â”‚
                  â”‚  - User query        â”‚
                  â”‚  - Conversation hist â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  LLM Inference       â”‚
                  â”‚  (Mistral on Ollama) â”‚
                  â”‚                      â”‚
                  â”‚  http://localhost:   â”‚
                  â”‚  11434/api/generate  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Parse LLM Response         â”‚
            â”‚                               â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚ ContÃ©m <tool>...</tool>?â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚           â”‚                   â”‚
            â”‚       SIM â”‚ NÃƒO              â”‚
            â”‚           â–¼ â–¼                â”‚
            â”‚        [Loop]    [Return]    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FLUXO DE DADOS DETALHADO                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. USER QUERY                                                       â”‚
â”‚     "Busque https://api.example.com/users/1 e salve em file.json"   â”‚
â”‚                                                                      â”‚
â”‚  2. RAG SEARCH                                                       â”‚
â”‚     â†’ Busca em docs/ documentos relevantes                          â”‚
â”‚     â†’ Encontra: "Como fazer requisiÃ§Ãµes HTTP..."                    â”‚
â”‚                                                                      â”‚
â”‚  3. PROMPT BUILDING                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     â”‚ SYSTEM:                                           â”‚          â”‚
â”‚     â”‚ VocÃª Ã© um assistant que pode chamar tools...     â”‚          â”‚
â”‚     â”‚                                                   â”‚          â”‚
â”‚     â”‚ CONTEXT (de docs):                              â”‚          â”‚
â”‚     â”‚ Como fazer requisiÃ§Ãµes HTTP:                    â”‚          â”‚
â”‚     â”‚ - Use api.call_api(url, method)                â”‚          â”‚
â”‚     â”‚ - Resposta vem em formato JSON                 â”‚          â”‚
â”‚     â”‚                                                   â”‚          â”‚
â”‚     â”‚ TOOLS AVAILABLE:                                â”‚          â”‚
â”‚     â”‚ - api.call_api(url, method, ...)              â”‚          â”‚
â”‚     â”‚ - file.write_file(filepath, content)           â”‚          â”‚
â”‚     â”‚ - json.validate_json(content)                  â”‚          â”‚
â”‚     â”‚                                                   â”‚          â”‚
â”‚     â”‚ USER QUERY:                                     â”‚          â”‚
â”‚     â”‚ Busque https://api.example.com/users/1          â”‚          â”‚
â”‚     â”‚ e salve em file.json                           â”‚          â”‚
â”‚     â”‚                                                   â”‚          â”‚
â”‚     â”‚ [Responda e use tools se necessÃ¡rio]          â”‚          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                      â”‚
â”‚  4. LLM RESPONSE (IteraÃ§Ã£o 1)                                       â”‚
â”‚     "Vou buscar os dados e salvar para vocÃª"                        â”‚
â”‚     <tool>{"tool": "api", "action": "call_api",                    â”‚
â”‚            "url": "https://api.example.com/users/1",               â”‚
â”‚            "method": "GET"}</tool>                                 â”‚
â”‚                                                                      â”‚
â”‚  5. TOOL EXECUTION                                                   â”‚
â”‚     â†’ Parse JSON tool call                                          â”‚
â”‚     â†’ Execute APITool.call_api(...)                                 â”‚
â”‚     â†’ Retorna: {"success": true, "data": {...}}                     â”‚
â”‚                                                                      â”‚
â”‚  6. FEEDBACK LOOP                                                    â”‚
â”‚     â†’ Pass resultado de volta para LLM                              â”‚
â”‚     â†’ LLM processa e detecta prÃ³xima tool necessÃ¡ria               â”‚
â”‚                                                                      â”‚
â”‚  7. LLM RESPONSE (IteraÃ§Ã£o 2)                                       â”‚
â”‚     "Dados obtidos com sucesso. Agora vou salvar..."               â”‚
â”‚     <tool>{"tool": "file", "action": "write_file",                â”‚
â”‚            "filepath": "file.json",                                â”‚
â”‚            "content": "{...dados...}"}</tool>                      â”‚
â”‚                                                                      â”‚
â”‚  8. TOOL EXECUTION                                                   â”‚
â”‚     â†’ Execute FileTool.write_file(...)                              â”‚
â”‚     â†’ Retorna: {"success": true, "data": "Arquivo salvo..."}      â”‚
â”‚                                                                      â”‚
â”‚  9. FINAL RESPONSE (IteraÃ§Ã£o 3)                                     â”‚
â”‚     "âœ“ Arquivo salvo com sucesso em file.json"                     â”‚
â”‚     (Sem <tool> tags, entÃ£o retorna ao usuÃ¡rio)                    â”‚
â”‚                                                                      â”‚
â”‚  10. USER SEES                                                       â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚      â”‚ Agent:                                 â”‚                    â”‚
â”‚      â”‚                                        â”‚                    â”‚
â”‚      â”‚ âœ“ Dados recuperados com sucesso       â”‚                    â”‚
â”‚      â”‚ âœ“ Arquivo salvo em file.json          â”‚                    â”‚
â”‚      â”‚                                        â”‚                    â”‚
â”‚      â”‚ Resumo:                                â”‚                    â”‚
â”‚      â”‚ - URL: https://...                     â”‚                    â”‚
â”‚      â”‚ - Status: 200 OK                       â”‚                    â”‚
â”‚      â”‚ - Arquivo: ./file.json                 â”‚                    â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ITERAÃ‡Ã•ES DO AGENT (Loop AutomÃ¡tico)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Query: "FaÃ§a login, busque usuÃ¡rios, salve em CSV"                â”‚
â”‚                                                                      â”‚
â”‚  [IteraÃ§Ã£o 1]                                                        â”‚
â”‚  LLM: "Primeiro vou fazer login"                                    â”‚
â”‚  â†’ Tool: api.call_api(url=/login, method=POST, data={...})         â”‚
â”‚  âœ“ Token recebido: "eyJhbGc..."                                    â”‚
â”‚                                                                      â”‚
â”‚  [IteraÃ§Ã£o 2]                                                        â”‚
â”‚  LLM: "Agora vou buscar usuÃ¡rios com o token"                      â”‚
â”‚  â†’ Tool: api.call_api(url=/users, method=GET,                      â”‚
â”‚           headers={"Auth": token})                                  â”‚
â”‚  âœ“ UsuÃ¡rios recebidos: [{id: 1, name: "John"}, ...]              â”‚
â”‚                                                                      â”‚
â”‚  [IteraÃ§Ã£o 3]                                                        â”‚
â”‚  LLM: "Vou converter para CSV e salvar"                            â”‚
â”‚  â†’ Tool: file.write_file(filepath=users.csv, content="...")        â”‚
â”‚  âœ“ Arquivo salvo                                                    â”‚
â”‚                                                                      â”‚
â”‚  [IteraÃ§Ã£o 4]                                                        â”‚
â”‚  LLM: "Tudo pronto!" (Sem tool call, retorna ao usuÃ¡rio)          â”‚
â”‚  âœ“ Resposta final exibida                                          â”‚
â”‚                                                                      â”‚
â”‚  Total de iteraÃ§Ãµes: 4                                              â”‚
â”‚  MÃ¡ximo permitido: 10 (configurÃ¡vel)                                â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STORAGE & PERSISTENCE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  /Users/gilmar.filho/GolandProjects/tale/                           â”‚
â”‚  â”‚                                                                   â”‚
â”‚  â”œâ”€â”€ docs/                     â† Seus documentos (PDF, TXT, MD)    â”‚
â”‚  â”‚   â”œâ”€â”€ api.md                                                    â”‚
â”‚  â”‚   â”œâ”€â”€ guia.pdf                                                  â”‚
â”‚  â”‚   â””â”€â”€ ... (adicione mais)                                       â”‚
â”‚  â”‚                                                                   â”‚
â”‚  â”œâ”€â”€ vector_store/             â† Cache FAISS (criado auto)        â”‚
â”‚  â”‚   â”œâ”€â”€ index.faiss                                              â”‚
â”‚  â”‚   â””â”€â”€ index.pkl                                                â”‚
â”‚  â”‚                                                                   â”‚
â”‚  â”œâ”€â”€ *.py                      â† CÃ³digo fonte                      â”‚
â”‚  â””â”€â”€ ...                                                            â”‚
â”‚                                                                       â”‚
â”‚  PRIMEIRA EXECUÃ‡ÃƒO:                                                  â”‚
â”‚  1. Carrega docs/ em memÃ³ria                                        â”‚
â”‚  2. Cria chunks                                                      â”‚
â”‚  3. Gera embeddings (nomic-embed-text)                             â”‚
â”‚  4. Salva FAISS em ./vector_store/                                 â”‚
â”‚  â±ï¸  ~30-60 segundos (depende do tamanho dos docs)                 â”‚
â”‚                                                                       â”‚
â”‚  EXECUÃ‡Ã•ES SUBSEQUENTES:                                             â”‚
â”‚  1. Carrega FAISS do cache                                          â”‚
â”‚  â±ï¸  ~2-5 segundos (muito mais rÃ¡pido!)                            â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                COMUNICAÃ‡ÃƒO COM OLLAMA                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Agent (main.py)          Ollama Server                             â”‚
â”‚        â”‚                       â”‚                                    â”‚
â”‚        â”‚  POST /api/generate   â”‚                                    â”‚
â”‚        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                                    â”‚
â”‚        â”‚  {                    â”‚                                    â”‚
â”‚        â”‚    "model": "mistral",â”‚                                    â”‚
â”‚        â”‚    "prompt": "...",   â”‚                                    â”‚
â”‚        â”‚    "stream": false    â”‚                                    â”‚
â”‚        â”‚  }                    â”‚                                    â”‚
â”‚        â”‚                       â”‚                                    â”‚
â”‚        â”‚                    [Processing...]                         â”‚
â”‚        â”‚                    [GPU/CPU]                               â”‚
â”‚        â”‚                       â”‚                                    â”‚
â”‚        â”‚  â† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                    â”‚
â”‚        â”‚  {                    â”‚                                    â”‚
â”‚        â”‚    "response": "...",â”‚                                    â”‚
â”‚        â”‚    "done": true      â”‚                                    â”‚
â”‚        â”‚  }                    â”‚                                    â”‚
â”‚        â”‚                       â”‚                                    â”‚
â”‚        â–¼                       â–¼                                    â”‚
â”‚                                                                       â”‚
â”‚  http://localhost:11434                                             â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ State Management do Agent

```python
Agent {
    model_name: "mistral"
    conversation_history: [
        {"role": "user", "content": "..."},
        {"role": "assistant", "content": "..."},
        ...
    ]
    doc_processor: DocumentProcessor {
        documents: [...docs carregados...]
        vector_store: FAISS{...}
    }
    max_iterations: 10
}
```

---

## ğŸ“Š Timing e Performance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Primeira ExecuÃ§Ã£o:                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Carregar docs:          5-10s                â”‚
â”‚  - Chunking:               2-5s                 â”‚
â”‚  - Embeddings:             20-40s               â”‚
â”‚  - Criar FAISS:            5-10s                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
â”‚  TOTAL:                    35-65s               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExecuÃ§Ãµes Subsequentes:                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Load FAISS:             1-2s                 â”‚
â”‚  - RAG Search:             0.5s                 â”‚
â”‚  - LLM Inference:          3-8s (depende tamanho)
â”‚  - Parse + Tools:          1-5s                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
â”‚  TOTAL:                    5-15s (por query)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Este Ã© o coraÃ§Ã£o do seu Agent! ğŸ’“**

